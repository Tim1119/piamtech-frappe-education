import{s as _,v as i,x as k,F as D,r as d,l as E,a3 as P,D as l,y as r,z as x,L as S,P as R,a4 as N,R as j}from"./frappe-ui.97769d2e.js";import{s as I}from"./index.701b120f.js";import{a as b}from"./index.8ac83f96.js";const L={class:"flex items-center justify-center h-[250px]"},O={class:"text-gray-500"},V={__name:"MissingData",props:{message:{type:String,default:"No data found"}},setup(p){return(f,g)=>(_(),i("div",L,[k("p",O,D(p.message),1)]))}},z={key:0},A={class:"px-5 py-4"},F={key:1},q={__name:"Grades",setup(p){const{getCurrentProgram:f,getStudentInfo:g}=I();let h=g().value,w=f().value;const v=d([]),u=d(""),n=d({columns:[{label:"Course",key:"course"},{label:"Batch",key:"batch"}],rows:[]});E({url:"education.education.api.get_student_programs",makeParams(){return{student:h.name}},onSuccess:a=>{let e=[];a.forEach(s=>{e.push({label:s.program,onClick:()=>u.value=s.program})}),u.value=e[e.length-1].label,v.value=e},auto:!0});const B=P({doctype:"Assessment Result",fields:["name","student_group","course","assessment_group","total_score","maximum_score","grade"],filters:{student:h.name,program:w.program},transform:()=>{},onSuccess:a=>{let e=b(a,t=>t.assessment_group),s=Object.keys(e);C(s);let o=b(a,t=>t.course);Object.keys(o).forEach(t=>{let c={};c.course=t,c.batch=o[t][0].student_group,s.forEach(y=>{let m=e[y].find($=>$.course===t);c[y]=m?`${m.total_score}/${m.maximum_score}`:"-"}),n.value.rows.push(c)})},auto:!0}),C=a=>{a.forEach(e=>{let s={};s.label=e,s.key=e,n.value.columns.push(s)})};return(a,e)=>{var o;const s=j("Button");return((o=l(B).data)==null?void 0:o.length)>0?(_(),i("div",z,[k("div",A,[r(l(R),{class:"mb-4",options:v.value},{default:x(({open:t})=>[r(s,{label:u.value},{suffix:x(()=>[r(l(S),{name:t?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),_:1},8,["options"]),r(l(N),{class:"h-[250px]",columns:n.value.columns,rows:n.value.rows,options:{selectable:!1,showTooltip:!1,onRowClick:()=>{}},"row-key":"id"},null,8,["columns","rows"])])])):(_(),i("div",F,[r(V,{message:"No grades found"})]))}}};export{q as default};
